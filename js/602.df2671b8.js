"use strict";(self["webpackChunkjongsh_image_hosting"]=self["webpackChunkjongsh_image_hosting"]||[]).push([[602],{3640:function(e,t,a){e.exports=a.p+"img/background-light.cef1d016.webp"},4602:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var s=a(47),n=(a(5331),a(9648),a(6768));const i={class:"whitelist-container"},r=["innerHTML"],o={class:"whitelist-content"},l={class:"back-button-wrapper"},c={class:"status-animation"},d={class:"status-icon"},u={class:"status-badge"},g={class:"status-info"},h={class:"status-actions"},m={class:"help-info"},p={class:"quick-links"};function k(e,t,a,k,b,y){const f=(0,n.g2)("font-awesome-icon"),v=s.S2;return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",{class:"background-wrapper",innerHTML:e.backgroundImagesTemplate},null,8,r),(0,n.Lk)("div",o,[(0,n.Lk)("div",l,[(0,n.bF)(v,{class:"back-button",onClick:y.goHome,circle:"",size:"large"},{default:(0,n.k6)(()=>[(0,n.bF)(f,{icon:"home"})]),_:1},8,["onClick"])]),(0,n.Lk)("div",c,[(0,n.Lk)("div",d,[(0,n.bF)(f,{icon:"shield-alt",class:"shield-icon"}),(0,n.Lk)("div",u,[(0,n.bF)(f,{icon:"clock",class:"clock-icon"})])])]),(0,n.Lk)("div",g,[t[7]||(t[7]=(0,n.Lk)("h1",{class:"status-title"},"白名单模式已启用",-1)),t[8]||(t[8]=(0,n.Lk)("p",{class:"status-description"}," 抱歉，当前已开启白名单模式，上传的图片需要审核通过后才能展示，请等待审核通过后再进行访问。 ",-1)),t[9]||(t[9]=(0,n.Lk)("p",{class:"status-description-en"}," Sorry, the whitelist mode is currently enabled, the uploaded images need to be audited before they can be displayed, please wait for the audit to be passed before visiting. ",-1)),(0,n.Lk)("div",h,[(0,n.bF)(v,{type:"primary",size:"large",class:"action-btn primary-btn",onClick:y.goHome},{default:(0,n.k6)(()=>[(0,n.bF)(f,{icon:"home",class:"btn-icon"}),t[2]||(t[2]=(0,n.eW)(" 返回首页 "))]),_:1,__:[2]},8,["onClick"]),(0,n.bF)(v,{size:"large",class:"action-btn secondary-btn",onClick:y.goBack},{default:(0,n.k6)(()=>[(0,n.bF)(f,{icon:"arrow-left",class:"btn-icon"}),t[3]||(t[3]=(0,n.eW)(" 返回上页 "))]),_:1,__:[3]},8,["onClick"])]),(0,n.Lk)("div",m,[t[6]||(t[6]=(0,n.Lk)("p",{class:"help-text"},"您可以尝试：",-1)),(0,n.Lk)("div",p,[(0,n.Lk)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(...e)=>y.goHome&&y.goHome(...e)),class:"quick-link"},[(0,n.bF)(f,{icon:"cloud-upload-alt"}),t[4]||(t[4]=(0,n.eW)(" 图片上传 "))]),(0,n.Lk)("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>y.refreshPage&&y.refreshPage(...e)),class:"quick-link"},[(0,n.bF)(f,{icon:"redo"}),t[5]||(t[5]=(0,n.eW)(" 刷新页面 "))])])]),t[10]||(t[10]=(0,n.Lk)("div",{class:"powered-by"},[(0,n.Lk)("p",null,[(0,n.eW)("Powered By: "),(0,n.Lk)("a",{href:"https://github.com/MarSeventh/CloudFlare-ImgBed",class:"project-link"}," CloudFlare-ImgBed ")])],-1))])]),t[11]||(t[11]=(0,n.Fv)('<div class="floating-elements" data-v-cedb8612><div class="floating-shape shape-1" data-v-cedb8612></div><div class="floating-shape shape-2" data-v-cedb8612></div><div class="floating-shape shape-3" data-v-cedb8612></div><div class="floating-shape shape-4" data-v-cedb8612></div><div class="floating-shape shape-5" data-v-cedb8612></div></div>',1))])}a(4114);var b=a(4354),y=a(8015),f={name:"WhiteListOn",mixins:[y.A],setup(){(0,b.u)({title:"White List On",meta:[{name:"robots",content:"noindex, nofollow"},{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"UTF-8"}]})},mounted(){this.initializeBackground("uploadBkImg",".whitelist-container",!1)},beforeUnmount(){this.clearBackgroundInterval()},methods:{goHome(){this.$router.push("/")},goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},refreshPage(){window.location.reload()}}},v=a(1241);const w=(0,v.A)(f,[["render",k],["__scopeId","data-v-cedb8612"]]);var I=w},8015:function(e,t,a){a.d(t,{A:function(){return i}});a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var s=a(782);function n(e,t=500){let a;return function(...s){clearTimeout(a),a=setTimeout(()=>e.apply(this,s),t)}}var i={data(){return{wallpapers:[],wallPaperIndex:0,customWallPaperIndex:0,backgroundInterval:null,backgroundInitParams:null,isChanging:!1}},computed:{...(0,s.L8)("base",["storeUserConfig","storeWallPapers","storeUseDarkMode"]),useDarkMode(){return this.storeUseDarkMode||document.documentElement.classList.contains("dark")},bkInterval(){return this.storeUserConfig?.bkInterval||3e3},bkOpacity(){return this.storeUserConfig?.bkOpacity||1},backgroundImagesTemplate(){return'\n        <img id="bg1" class="background-image1" alt="Background Image"/>\n        <img id="bg2" class="background-image2" alt="Background Image"/>\n      '},backgroundImagesStyles(){return`\n        .background-image1, .background-image2 {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n          z-index: -1;\n          opacity: 0;\n          transform: scale(1);\n          transition: opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${this.bkInterval/1e3}s cubic-bezier(0.42, 0, 0.58, 1);\n        }\n      `}},watch:{useDarkMode:n(async function(e,t){e!==t&&this.backgroundInitParams&&!this.isChanging&&(await this.smoothThemeTransition(this.backgroundInitParams.configKey,this.backgroundInitParams.containerSelector,this.backgroundInitParams.useDefaultBackground),this.isChanging=!1)},300)},mounted(){this.injectBackgroundStyles()},beforeUnmount(){this.backgroundInterval&&clearInterval(this.backgroundInterval),this.clearBackgroundImages(!0),this.removeBackgroundStyles()},methods:{injectBackgroundStyles(){const e="background-manager-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=this.backgroundImagesStyles,document.head.appendChild(t)}},removeBackgroundStyles(){const e="background-manager-styles",t=document.getElementById(e);t&&t.remove()},createBackgroundElements(e){if(!e)return void console.warn("未提供有效的容器元素");if(document.getElementById("bg1")||document.getElementById("bg2"))return;const t=document.createElement("img");t.id="bg1",t.className="background-image1",t.alt="Background Image";const a=document.createElement("img");a.id="bg2",a.className="background-image2",a.alt="Background Image",e.insertBefore(a,e.firstChild),e.insertBefore(t,e.firstChild)},loadBackgroundImage(e,t,a,s){e.src=t,e.onload=()=>{e.style.opacity=1,e.style.transform="scale(1)",s&&requestAnimationFrame(()=>{e.style.transform="scale(1.25)"}),a&&(a.style.background="transparent")}},clearBackgroundInterval(){this.backgroundInterval&&(clearInterval(this.backgroundInterval),this.backgroundInterval=null)},switchWallpaper(e,t){if(0===this.wallpapers.length)return;const a=0!=e.style.opacity?e:t,s=0!=e.style.opacity?t:e;a.style.opacity=0,a.style.transform="scale(1)",this.wallPaperIndex=(this.wallPaperIndex+1)%this.wallpapers.length,s.src=this.wallpapers[this.wallPaperIndex],s.onload=()=>{s.style.opacity=this.bkOpacity,s.style.transform="scale(1.25)"}},preloadWallpapers(){if(!this.wallpapers||this.wallpapers.length<=1)return;const e=new Set,t=a=>{if(a>=this.wallpapers.length)return;const s=this.wallpapers[a];if(e.has(s))return void t(a+1);const n=new Image;n.src=s,n.onload=()=>{e.add(s),t(a+1)},n.onerror=()=>{console.warn(`壁纸加载失败: ${s}`),t(a+1)}};t((this.wallPaperIndex+1)%this.wallpapers.length)},async clearBackgroundImages(e=!1){const t=document.getElementById("bg1"),a=document.getElementById("bg2");await Promise.all([t,a].map(t=>{if(t)return e?(t.style.transition="none",t.style.transform="scale(1)",t.style.opacity=0,t.src="",void requestAnimationFrame(()=>{t.style.transition=`opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${this.bkInterval/1e3}s cubic-bezier(0.42, 0, 0.58, 1)`})):(t.style.opacity=0,t.style.transform="scale(1)",new Promise(e=>{setTimeout(()=>{t.src="",t.style.transition="none",requestAnimationFrame(()=>{t.style.transition=`opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${this.bkInterval/1e3}s cubic-bezier(0.42, 0, 0.58, 1)`,e()})},800)}))}))},async initializeBackground(e,t=".login",s=!1){this.backgroundInitParams={configKey:e,containerSelector:t,useDefaultBackground:s};const n=document.querySelector(t);!n||document.getElementById("bg1")&&document.getElementById("bg2")||this.createBackgroundElements(n);const i=document.getElementById("bg1"),r=document.getElementById("bg2");if(!i||!r)return void console.warn("背景图元素 #bg1 或 #bg2 未找到，请确保页面中包含这些元素");const o=this.storeUserConfig?.[e];"string"===typeof o?(this.storeWallPapers[e]&&0!==this.storeWallPapers[e].length||await this.$store.dispatch("base/fetchWallPapers",{type:e,source:this.storeUserConfig?.[e]||"random",num:5}),this.wallpapers=this.storeWallPapers[e]||[]):Array.isArray(o)?this.wallpapers=o:s&&(this.wallpapers=[this.useDarkMode?a(9712):a(3640)]),1===this.wallpapers.length?this.loadBackgroundImage(i,this.wallpapers[0],n,!1):this.wallpapers.length>1&&(this.loadBackgroundImage(i,this.wallpapers[this.wallPaperIndex],n,!0),this.backgroundInterval=setInterval(()=>{this.switchWallpaper(i,r)},this.bkInterval),this.preloadWallpapers())},async smoothThemeTransition(e,t=".login",s=!1){this.isChanging=!0;const n=this.storeUserConfig?.[e];if(!s||void 0!==n)return void await this.reinitializeBackground(e,t,s);const i=document.getElementById("bg1"),r=document.getElementById("bg2");if(!i||!r)return void await this.reinitializeBackground(e,t,s);const o=0!=i.style.opacity?i:r,l=0!=i.style.opacity?r:i,c=this.useDarkMode,d=a(c?9712:3640);await new Promise((e,a)=>{l.src=d,l.onload=()=>{o.style.opacity=0,l.style.opacity=this.bkOpacity,e()};const s=document.querySelector(t);s&&(s.style.background="transparent")})},async reinitializeBackground(e,t=".login",a=!1){this.clearBackgroundInterval(),await this.clearBackgroundImages(!1),this.wallPaperIndex=0,this.customWallPaperIndex=0,await this.initializeBackground(e,t,a)}}}},9712:function(e,t,a){e.exports=a.p+"img/background-dark.409f8ba9.webp"}}]);
//# sourceMappingURL=602.df2671b8.js.map