{"version":3,"file":"js/771.8de88988.js","mappings":"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","sources":["webpack://jongsh_image_hosting/./src/components/Logo.vue?a2f5","webpack://jongsh_image_hosting/./src/components/Logo.vue","webpack://jongsh_image_hosting/./src/components/Logo.vue?4125","webpack://jongsh_image_hosting/./src/components/Footer.vue?0e60","webpack://jongsh_image_hosting/./src/components/Footer.vue","webpack://jongsh_image_hosting/./src/components/Footer.vue?d468","webpack://jongsh_image_hosting/./src/utils/debounce.js","webpack://jongsh_image_hosting/./src/mixins/backgroundManager.js","webpack://jongsh_image_hosting/./src/components/ToggleDark.vue?46ea","webpack://jongsh_image_hosting/./src/components/ToggleDark.vue","webpack://jongsh_image_hosting/./src/components/ToggleDark.vue?0bce"],"sourcesContent":["import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"href\", \"target\"];\nconst _hoisted_2 = [\"alt\", \"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"a\", {\n    href: $props.href,\n    target: $props.target,\n    class: _normalizeClass(_ctx.logo - _ctx.link)\n  }, [_createElementVNode(\"img\", {\n    class: _normalizeClass($options.logoClasses),\n    alt: $props.alt,\n    src: $options.logoUrl\n  }, null, 10, _hoisted_2)], 10, _hoisted_1);\n}","import { mapGetters } from 'vuex';\nexport default {\n  name: 'Logo',\n  props: {\n    // Logo链接地址\n    href: {\n      type: String,\n      default: 'https://github.com/MarSeventh/CloudFlare-ImgBed'\n    },\n    // 链接打开方式\n    target: {\n      type: String,\n      default: '_blank',\n      // _blank, _self, _parent, _top\n      validator: value => ['_blank', '_self', '_parent', '_top'].includes(value)\n    },\n    // 图片alt文本\n    alt: {\n      type: String,\n      default: 'Jongsh logo'\n    },\n    // 自定义logo图片URL（可选）\n    customSrc: {\n      type: String,\n      default: ''\n    },\n    // Logo位置样式\n    position: {\n      type: String,\n      default: 'fixed',\n      // fixed, relative, absolute\n      validator: value => ['fixed', 'relative', 'absolute', 'static'].includes(value)\n    },\n    // Logo大小\n    size: {\n      type: String,\n      default: 'normal',\n      // small, normal, large\n      validator: value => ['small', 'normal', 'large'].includes(value)\n    },\n    // 是否启用悬停动画\n    enableHover: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    ...mapGetters(\"base\", ['storeUserConfig']),\n    logoUrl() {\n      // 优先级：customSrc > 用户配置 > 默认图片\n      return this.customSrc || this.storeUserConfig?.logoUrl || require('../assets/logo.png');\n    },\n    logoClasses() {\n      return {\n        'logo': true,\n        [`logo--${this.position}`]: true,\n        [`logo--${this.size}`]: true,\n        'logo--hover-enabled': this.enableHover\n      };\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./Logo.vue?vue&type=template&id=6d89fe76&scoped=true\"\nimport script from \"./Logo.vue?vue&type=script&lang=js\"\nexport * from \"./Logo.vue?vue&type=script&lang=js\"\n\nimport \"./Logo.vue?vue&type=style&index=0&id=6d89fe76&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6d89fe76\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"page-footer\"\n};\nconst _hoisted_2 = [\"href\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return !$options.disableFooter ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"p\", null, [_createTextVNode(\"© 2024-\" + _toDisplayString($options.thisYear) + \" Designed by \", 1), _cache[0] || (_cache[0] = _createElementVNode(\"a\", {\n    class: \"footer-name\",\n    href: \"https://github.com/MarSeventh\",\n    target: \"_blank\"\n  }, \"SanyueQi\", -1)), _cache[1] || (_cache[1] = _createTextVNode(\" & \")), _cache[2] || (_cache[2] = _createElementVNode(\"a\", {\n    class: \"footer-name\",\n    href: \"https://github.com/jongsh\",\n    target: \"_blank\"\n  }, \"Jongsh\", -1)), _cache[3] || (_cache[3] = _createTextVNode(\" for You! \")), _createElementVNode(\"a\", {\n    href: $options.footerLink,\n    target: \"_blank\"\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: \"paper-plane\",\n    class: \"footer-link-icon\"\n  })], 8, _hoisted_2)])])) : _createCommentVNode(\"\", true);\n}","import { mapGetters } from 'vuex';\nexport default {\n  name: 'Footer',\n  computed: {\n    ...mapGetters(\"base\", ['storeUserConfig']),\n    footerLink() {\n      return this.storeUserConfig?.footerLink || 'https://github.com/jongsh';\n    },\n    thisYear() {\n      return new Date().getFullYear();\n    },\n    disableFooter() {\n      return this.storeUserConfig?.disableFooter || false;\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./Footer.vue?vue&type=template&id=25d971c2&scoped=true\"\nimport script from \"./Footer.vue?vue&type=script&lang=js\"\nexport * from \"./Footer.vue?vue&type=script&lang=js\"\n\nimport \"./Footer.vue?vue&type=style&index=0&id=25d971c2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25d971c2\"]])\n\nexport default __exports__","// 防抖函数\r\nexport default function debounce(fn, delay = 500) {\r\n  let timer;\r\n  return function (...args) {\r\n    clearTimeout(timer);\r\n    timer = setTimeout(() => fn.apply(this, args), delay);\r\n  };\r\n}\r\n","/**\r\n * 背景图管理 Mixin\r\n * 用于统一管理页面背景图的加载和轮播逻辑\r\n */\r\n\r\nimport { mapGetters } from \"vuex\";\r\nimport debounce from \"@/utils/debounce\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      wallpapers: [],\r\n      wallPaperIndex: 0,\r\n      customWallPaperIndex: 0,\r\n      backgroundInterval: null, // 存储轮播定时器\r\n      backgroundInitParams: null, // 存储初始化参数，用于主题切换时重新初始化\r\n      isChanging: false, // 防止重复修改配置导致多次初始化\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(\"base\", [\"storeUserConfig\", \"storeWallPapers\", \"storeUseDarkMode\"]),\r\n    useDarkMode() {\r\n      return this.storeUseDarkMode || document.documentElement.classList.contains(\"dark\");\r\n    },\r\n    bkInterval() {\r\n      return this.storeUserConfig?.bkInterval || 3000;\r\n    },\r\n    bkOpacity() {\r\n      return this.storeUserConfig?.bkOpacity || 1;\r\n    },\r\n    // 提供背景图片元素的模板\r\n    backgroundImagesTemplate() {\r\n      return `\r\n        <img id=\"bg1\" class=\"background-image1\" alt=\"Background Image\"/>\r\n        <img id=\"bg2\" class=\"background-image2\" alt=\"Background Image\"/>\r\n      `;\r\n    },\r\n    // 提供背景图片的CSS样式\r\n    backgroundImagesStyles() {\r\n      return `\r\n        .background-image1, .background-image2 {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          object-fit: cover;\r\n          z-index: -1;\r\n          opacity: 0;\r\n          transform: scale(1);\r\n          transition: opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${\r\n            this.bkInterval / 1000\r\n          }s cubic-bezier(0.42, 0, 0.58, 1);\r\n        }\r\n      `;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    // 监听深色模式切换\r\n    useDarkMode: debounce(async function (newVal, oldVal) {\r\n      if (newVal !== oldVal && this.backgroundInitParams && !this.isChanging) {\r\n        await this.smoothThemeTransition(\r\n          this.backgroundInitParams.configKey,\r\n          this.backgroundInitParams.containerSelector,\r\n          this.backgroundInitParams.useDefaultBackground\r\n        );\r\n        this.isChanging = false; // 设置标志，防止重复触发\r\n      }\r\n    }, 300),\r\n  },\r\n\r\n  mounted() {\r\n    // 动态注入背景图片的CSS样式\r\n    this.injectBackgroundStyles();\r\n  },\r\n\r\n  beforeUnmount() {\r\n    // 组件销毁前清除定时器\r\n    if (this.backgroundInterval) {\r\n      clearInterval(this.backgroundInterval);\r\n    }\r\n    // 立即清除背景图片，不使用过渡效果\r\n    this.clearBackgroundImages(true);\r\n    // 移除动态注入的样式\r\n    this.removeBackgroundStyles();\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * 动态注入背景图片样式\r\n     */\r\n    injectBackgroundStyles() {\r\n      const styleId = \"background-manager-styles\";\r\n      if (!document.getElementById(styleId)) {\r\n        const style = document.createElement(\"style\");\r\n        style.id = styleId;\r\n        style.textContent = this.backgroundImagesStyles;\r\n        document.head.appendChild(style);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 移除动态注入的样式\r\n     */\r\n    removeBackgroundStyles() {\r\n      const styleId = \"background-manager-styles\";\r\n      const existingStyle = document.getElementById(styleId);\r\n      if (existingStyle) {\r\n        existingStyle.remove();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 动态创建背景图片元素\r\n     * @param {HTMLElement} container - 要插入背景图片的容器元素\r\n     */\r\n    createBackgroundElements(container) {\r\n      if (!container) {\r\n        console.warn(\"未提供有效的容器元素\");\r\n        return;\r\n      }\r\n      // 检查是否已经存在背景图片元素\r\n      if (document.getElementById(\"bg1\") || document.getElementById(\"bg2\")) {\r\n        return;\r\n      }\r\n      // 创建 bg1 元素\r\n      const bg1 = document.createElement(\"img\");\r\n      bg1.id = \"bg1\";\r\n      bg1.className = \"background-image1\";\r\n      bg1.alt = \"Background Image\";\r\n      // 创建 bg2 元素\r\n      const bg2 = document.createElement(\"img\");\r\n      bg2.id = \"bg2\";\r\n      bg2.className = \"background-image2\";\r\n      bg2.alt = \"Background Image\";\r\n      // 将元素插入到容器的开头\r\n      container.insertBefore(bg2, container.firstChild);\r\n      container.insertBefore(bg1, container.firstChild);\r\n    },\r\n\r\n    /**\r\n     * 初始化背景图\r\n     * @param {string} configKey - 用户配置中的背景图配置键名\r\n     * @param {string} containerSelector - 容器选择器，用于设置透明背景\r\n     * @param {boolean} useDefaultBackground - 是否使用默认背景图\r\n     */\r\n    async initializeBackground(configKey, containerSelector = \".login\", useDefaultBackground = false) {\r\n      // 保存初始化参数，用于主题切换时重新初始化\r\n      this.backgroundInitParams = {\r\n        configKey,\r\n        containerSelector,\r\n        useDefaultBackground,\r\n      };\r\n      // 如果元素不存在，则创建\r\n      const container = document.querySelector(containerSelector);\r\n      if (container && (!document.getElementById(\"bg1\") || !document.getElementById(\"bg2\"))) {\r\n        this.createBackgroundElements(container);\r\n      }\r\n\r\n      const bg1 = document.getElementById(\"bg1\");\r\n      const bg2 = document.getElementById(\"bg2\");\r\n      if (!bg1 || !bg2) {\r\n        console.warn(\"背景图元素 #bg1 或 #bg2 未找到，请确保页面中包含这些元素\");\r\n        return;\r\n      }\r\n\r\n      // 基于用户配置加载壁纸\r\n      const config = this.storeUserConfig?.[configKey];\r\n      if (typeof config === \"string\") {\r\n        // 预定义轮播壁纸配置\r\n        await this.$store.dispatch(\"base/fetchWallPapers\", {\r\n          type: configKey,\r\n          source: this.storeUserConfig?.[configKey] || \"random\",\r\n          num: 5,\r\n        });\r\n        this.wallpapers = this.storeWallPapers[configKey] || [];\r\n      } else if (Array.isArray(config)) {\r\n        // 用户指定的壁纸数组\r\n        this.wallpapers = config;\r\n      } else if (useDefaultBackground) {\r\n        // 使用默认背景图\r\n        this.wallpapers = [\r\n          this.useDarkMode ? require(\"@/assets/background-dark.webp\") : require(\"@/assets/background-light.webp\"),\r\n        ];\r\n      }\r\n\r\n      if (this.wallpapers.length === 1) {\r\n        // 如果只有一张壁纸，直接加载\r\n        this.loadBackgroundImage(bg1, this.wallpapers[0], container, false);\r\n      } else if (this.wallpapers.length > 1) {\r\n        // 如果有多张壁纸，设置初始状态并开始轮播\r\n        this.loadBackgroundImage(bg1, this.wallpapers[this.wallPaperIndex], container, true);\r\n        this.backgroundInterval = setInterval(() => {\r\n          this.switchWallpaper(bg1, bg2);\r\n        }, this.bkInterval);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 加载背景图片\r\n     */\r\n    loadBackgroundImage(imgElement, imageSrc, container, useScale) {\r\n      imgElement.src = imageSrc;\r\n      imgElement.onload = () => {\r\n        // 先设置初始状态\r\n        imgElement.style.opacity = 1;\r\n        imgElement.style.transform = \"scale(1)\";\r\n\r\n        if (useScale) {\r\n          requestAnimationFrame(() => {\r\n            imgElement.style.transform = \"scale(1.25)\";\r\n          });\r\n        }\r\n\r\n        // 设置容器背景为透明\r\n        if (container) {\r\n          container.style.background = \"transparent\";\r\n        }\r\n      };\r\n    },\r\n\r\n    /**\r\n     * 切换壁纸\r\n     */\r\n    switchWallpaper(bg1, bg2) {\r\n      if (this.wallpapers.length === 0) return;\r\n      const curBg = bg1.style.opacity != 0 ? bg1 : bg2;\r\n      const nextBg = bg1.style.opacity != 0 ? bg2 : bg1;\r\n\r\n      curBg.style.opacity = 0;\r\n      curBg.style.transform = \"scale(1)\";\r\n      this.wallPaperIndex = (this.wallPaperIndex + 1) % this.wallpapers.length;\r\n\r\n      nextBg.src = this.wallpapers[this.wallPaperIndex];\r\n      nextBg.onload = () => {\r\n        nextBg.style.opacity = this.bkOpacity;\r\n        nextBg.style.transform = \"scale(1.25)\";\r\n      };\r\n    },\r\n\r\n    /**\r\n     * 清除背景轮播定时器\r\n     */\r\n    clearBackgroundInterval() {\r\n      if (this.backgroundInterval) {\r\n        clearInterval(this.backgroundInterval);\r\n        this.backgroundInterval = null;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 清除背景图片显示（带过渡效果）\r\n     * @param {boolean} immediate - 是否立即清除，不使用过渡效果\r\n     */\r\n    async clearBackgroundImages(immediate = false) {\r\n      const bg1 = document.getElementById(\"bg1\");\r\n      const bg2 = document.getElementById(\"bg2\");\r\n\r\n      await Promise.all(\r\n        [bg1, bg2].map((bg) => {\r\n          if (!bg) return;\r\n          if (immediate) {\r\n            bg.style.transition = \"none\";\r\n            bg.style.transform = \"scale(1)\";\r\n            bg.style.opacity = 0;\r\n            bg.src = \"\";\r\n            requestAnimationFrame(() => {\r\n              bg.style.transition = `opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${\r\n                this.bkInterval / 1000\r\n              }s cubic-bezier(0.42, 0, 0.58, 1)`;\r\n            });\r\n          } else {\r\n            bg.style.opacity = 0;\r\n            bg.style.transform = \"scale(1)\";\r\n            return new Promise((resolve) => {\r\n              setTimeout(() => {\r\n                bg.src = \"\";\r\n                bg.style.transition = \"none\";\r\n                requestAnimationFrame(() => {\r\n                  bg.style.transition = `opacity 0.8s cubic-bezier(0.42, 0, 0.58, 1), transform ${\r\n                    this.bkInterval / 1000\r\n                  }s cubic-bezier(0.42, 0, 0.58, 1)`;\r\n                  resolve();\r\n                });\r\n              }, 800);\r\n            });\r\n          }\r\n        })\r\n      );\r\n    },\r\n\r\n    /**\r\n     * 平滑主题切换（用于响应主题模式变化）\r\n     * @param {string} configKey - 用户配置中的背景图配置键名\r\n     * @param {string} containerSelector - 容器选择器\r\n     * @param {boolean} useDefaultBackground - 是否使用默认背景图\r\n     */\r\n    async smoothThemeTransition(configKey, containerSelector = \".login\", useDefaultBackground = false) {\r\n      this.isChanging = true; // 设置标志，防止重复触发\r\n      const backgroundConfig = this.storeUserConfig?.[configKey];\r\n\r\n      // 如果不是默认背景配置，则直接重新初始化（自定义背景不受主题影响）\r\n      if (!useDefaultBackground || backgroundConfig !== undefined) {\r\n        await this.reinitializeBackground(configKey, containerSelector, useDefaultBackground);\r\n        return;\r\n      }\r\n\r\n      // 对于默认背景，执行平滑过渡\r\n      const bg1 = document.getElementById(\"bg1\");\r\n      const bg2 = document.getElementById(\"bg2\");\r\n\r\n      if (!bg1 || !bg2) {\r\n        // 如果背景元素不存在，直接重新初始化\r\n        await this.reinitializeBackground(configKey, containerSelector, useDefaultBackground);\r\n        return;\r\n      }\r\n\r\n      // 确定当前显示的背景和下一个背景\r\n      const currentBg = bg1.style.opacity != 0 ? bg1 : bg2;\r\n      const nextBg = bg1.style.opacity != 0 ? bg2 : bg1;\r\n\r\n      // 获取新主题对应的背景图\r\n      const isDark = this.useDarkMode;\r\n      const newThemeImage = isDark\r\n        ? require(\"@/assets/background-dark.webp\")\r\n        : require(\"@/assets/background-light.webp\");\r\n\r\n      // 预加载新背景图\r\n      await new Promise((resolve, reject) => {\r\n        nextBg.src = newThemeImage;\r\n        nextBg.onload = () => {\r\n          currentBg.style.opacity = 0;\r\n          nextBg.style.opacity = this.bkOpacity;\r\n          resolve();\r\n        };\r\n        const container = document.querySelector(containerSelector);\r\n        if (container) container.style.background = \"transparent\";\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 重新初始化背景图（用于响应配置变化）\r\n     */\r\n    async reinitializeBackground(configKey, containerSelector = \".login\", useDefaultBackground = false) {\r\n      this.clearBackgroundInterval();\r\n      await this.clearBackgroundImages(false);\r\n      this.wallPaperIndex = 0;\r\n      this.customWallPaperIndex = 0;\r\n      await this.initializeBackground(configKey, containerSelector, useDefaultBackground);\r\n    },\r\n  },\r\n};\r\n","import { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  id: \"themeMask\"\n};\nconst _hoisted_2 = [\"cx\", \"cy\", \"r\"];\nconst _hoisted_3 = [\"r\"];\nconst _hoisted_4 = [\"opacity\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    id: \"themeToggle\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.handleToggleClick && $options.handleToggleClick(...args))\n  }, [(_openBlock(), _createElementBlock(\"svg\", {\n    class: _normalizeClass([\"theme_toggle_svg\", {\n      'dark': $data.isDark\n    }]),\n    width: \"1.5em\",\n    height: \"1.5em\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    \"stroke-width\": \"2\",\n    \"stroke-linecap\": \"round\",\n    \"stroke-linejoin\": \"round\",\n    stroke: \"currentColor\"\n  }, [_createElementVNode(\"mask\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"rect\", {\n    x: \"0\",\n    y: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    fill: \"white\"\n  }, null, -1)), _createElementVNode(\"circle\", {\n    class: \"theme_toggle_circle1\",\n    fill: \"black\",\n    cx: $data.isDark ? '50%' : '100%',\n    cy: $data.isDark ? '23%' : '0%',\n    r: $data.isDark ? '9' : '5'\n  }, null, 8, _hoisted_2)]), _createElementVNode(\"circle\", {\n    class: \"theme_toggle_circle2\",\n    cx: \"12\",\n    cy: \"12\",\n    r: $data.isDark ? '9' : '5',\n    mask: \"url(#themeMask)\"\n  }, null, 8, _hoisted_3), _createElementVNode(\"g\", {\n    class: \"theme_toggle_g\",\n    stroke: \"currentColor\",\n    opacity: $data.isDark ? 0 : 1\n  }, _cache[2] || (_cache[2] = [_createStaticVNode(\"<line x1=\\\"12\\\" y1=\\\"1\\\" x2=\\\"12\\\" y2=\\\"3\\\" data-v-2b38c282></line><line x1=\\\"12\\\" y1=\\\"21\\\" x2=\\\"12\\\" y2=\\\"23\\\" data-v-2b38c282></line><line x1=\\\"4.22\\\" y1=\\\"4.22\\\" x2=\\\"5.64\\\" y2=\\\"5.64\\\" data-v-2b38c282></line><line x1=\\\"18.36\\\" y1=\\\"18.36\\\" x2=\\\"19.78\\\" y2=\\\"19.78\\\" data-v-2b38c282></line><line x1=\\\"1\\\" y1=\\\"12\\\" x2=\\\"3\\\" y2=\\\"12\\\" data-v-2b38c282></line><line x1=\\\"21\\\" y1=\\\"12\\\" x2=\\\"23\\\" y2=\\\"12\\\" data-v-2b38c282></line><line x1=\\\"4.22\\\" y1=\\\"19.78\\\" x2=\\\"5.64\\\" y2=\\\"18.36\\\" data-v-2b38c282></line><line x1=\\\"18.36\\\" y1=\\\"5.64\\\" x2=\\\"19.78\\\" y2=\\\"4.22\\\" data-v-2b38c282></line>\", 8)]), 8, _hoisted_4)], 2))]);\n}","import { mapGetters } from 'vuex';\nexport default {\n  name: 'ToggleDark',\n  data() {\n    return {\n      isDark: this.$store.state.base.useDarkMode || document.documentElement.classList.contains('dark')\n    };\n  },\n  methods: {\n    handleToggleClick() {\n      this.isDark = !this.isDark;\n      this.$store.commit('base/setUseDarkMode', this.isDark);\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./ToggleDark.vue?vue&type=template&id=2b38c282&scoped=true\"\nimport script from \"./ToggleDark.vue?vue&type=script&lang=js\"\nexport * from \"./ToggleDark.vue?vue&type=script&lang=js\"\n\nimport \"./ToggleDark.vue?vue&type=style&index=0&id=2b38c282&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b38c282\"]])\n\nexport default __exports__"],"names":["_hoisted_1","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","href","target","class","logo","link","logoClasses","alt","src","logoUrl","name","props","type","String","default","validator","value","includes","customSrc","position","size","enableHover","Boolean","computed","this","storeUserConfig","__exports__","key","_component_font_awesome_icon","disableFooter","thisYear","footerLink","icon","Date","getFullYear","debounce","fn","delay","timer","args","clearTimeout","setTimeout","apply","data","wallpapers","wallPaperIndex","customWallPaperIndex","backgroundInterval","backgroundInitParams","isChanging","mapGetters","useDarkMode","storeUseDarkMode","document","documentElement","classList","contains","bkInterval","bkOpacity","backgroundImagesTemplate","backgroundImagesStyles","watch","async","newVal","oldVal","smoothThemeTransition","configKey","containerSelector","useDefaultBackground","mounted","injectBackgroundStyles","beforeUnmount","clearInterval","clearBackgroundImages","removeBackgroundStyles","methods","styleId","getElementById","style","createElement","id","textContent","head","appendChild","existingStyle","remove","createBackgroundElements","container","console","warn","bg1","className","bg2","insertBefore","firstChild","initializeBackground","querySelector","config","$store","dispatch","source","num","storeWallPapers","Array","isArray","require","length","loadBackgroundImage","setInterval","switchWallpaper","imgElement","imageSrc","useScale","onload","opacity","transform","requestAnimationFrame","background","curBg","nextBg","clearBackgroundInterval","immediate","Promise","all","map","bg","transition","resolve","backgroundConfig","undefined","reinitializeBackground","currentBg","isDark","newThemeImage","reject","_hoisted_3","_hoisted_4","onClick","handleToggleClick","width","height","viewBox","fill","stroke","x","y","cx","cy","r","mask","state","base","commit"],"sourceRoot":""}